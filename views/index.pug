extends ../layout

block content
  .max-w-7xl.mx-auto.mt-6.bg-white.p-6.rounded-2xl.shadow-lg
    .flex.justify-between.items-center.mb-6
      h1.text-3xl.font-bold.text-blue-900 
        i.fas.fa-user-injured.mr-2
        | Pacientes y sus Admisiones
      a(href="/pacientes/nuevo" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-md flex items-center")
        i.fas.fa-plus.mr-2
        | Nuevo Paciente

    .overflow-x-auto
      table.w-full.border.border-gray-200.rounded-lg.shadow-sm
        thead.bg-blue-100
          tr
            th.text-left.p-3.text-sm.text-gray-700 Nombre
            th.text-left.p-3.text-sm.text-gray-700 Fecha Nacimiento
            th.text-left.p-3.text-sm.text-gray-700 Sexo
            th.text-left.p-3.text-sm.text-gray-700 DNI
            th.text-left.p-3.text-sm.text-gray-700 Última Admisión
            th.text-left.p-3.text-sm.text-gray-700 Estado
            th.text-left.p-3.text-sm.text-gray-700 Habitación
            th.text-left.p-3.text-sm.text-gray-700 Acciones

        tbody
          each paciente in pacientes
            tr.border-b.border-gray-100.hover:bg-blue-50
              td.p-3.font-medium #{paciente.nombre} #{paciente.apellido}
              td.p-3 #{paciente.fecha_nacimiento.toLocaleDateString()}
              td.p-3 
                span(class=paciente.sexo === 'M' ? 'bg-blue-100 text-blue-800' : 'bg-pink-100 text-pink-800', class="px-2 py-1 rounded-full text-xs") 
                  | #{paciente.sexo === 'M' ? 'Masculino' : 'Femenino'}
              td.p-3.font-mono #{paciente.dni}
              td.p-3 #{paciente.ultima_admision?.fecha ? paciente.ultima_admision.fecha.toLocaleDateString() : 'N/A'}
              td.p-3
                span(class=paciente.ultima_admision?.estado === 'Activo' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800', class="px-2 py-1 rounded-full text-xs") 
                  | #{paciente.ultima_admision?.estado || 'Sin internar'}
              td.p-3.font-medium #{paciente.ultima_admision?.habitacion || '—'}
              td.p-3.flex.space-x-2
                a(href=`/pacientes/${paciente.id}` class="text-blue-600 hover:text-blue-800" title="Ver Detalle")
                  i.fas.fa-eye
                a(href=`/pacientes/editar/${paciente.id}` class="text-yellow-600 hover:text-yellow-800" title="Editar")
                  i.fas.fa-edit
                a(href=`/pacientes/admision/${paciente.id}` class="text-teal-600 hover:text-teal-800" title="Nueva Admisión")
                  i.fas.fa-procedures

block scripts
  script.
    document.addEventListener('DOMContentLoaded', function() );