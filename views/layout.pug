doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
<<<<<<< HEAD
    title #{title} - Sistema HIS
    link(rel="stylesheet", href="/css/bootstrap.min.css")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css")
    link(rel="stylesheet", href="/css/style.css")
    meta(name="layout-version", content="2025-06-10-B")
  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-primary.shadow
      .container-fluid
        a.navbar-brand(href="/") Sistema HIS
        button.navbar-toggler(type="button", data-bs-toggle="collapse", data-bs-target="#navbarNav", aria-controls="navbarNav", aria-expanded="false", aria-label="Toggle navigation")
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.me-auto.mb-2.mb-lg-0
            li.nav-item
              a.nav-link(href="/pacientes") Pacientes
            li.nav-item
              a.nav-link(href="/admisiones") Admisiones
            li.nav-item
              a.nav-link(href="/medicos") Médicos
            li.nav-item
              a.nav-link(href="/turnos") Turnos
            li.nav-item
              a.nav-link(href="/evaluaciones") Evaluaciones
            li.nav-item
              a.nav-link(href="/altas") Altas
            li.nav-item
              a.nav-link(href="/usuarios") Usuarios
            li.nav-item
              a.nav-link(href="/reportes") Reportes
            li.nav-item
              a.nav-link(href="/ajustes") Ajustes
          ul.navbar-nav
            if isAuthenticated
              li.nav-item.dropdown
                a#navbarDropdown.nav-link.dropdown-toggle(href="#", role="button", data-bs-toggle="dropdown", aria-expanded="false")
                  i.fas.fa-user-circle.me-1
                  | #{user.nombre_usuario || user.email || 'Usuario'}
                ul.dropdown-menu(aria-labelledby="navbarDropdown")
                  li
                    a.dropdown-item(href="/perfil") Perfil
                  li
                    hr.dropdown-divider
                  li
                    a.dropdown-item(href="/auth/logout") Cerrar Sesión
            else
              li.nav-item
                a.btn.btn-outline-light(href="/auth/login") Iniciar Sesión

    .container.mt-4
      if success && success.length
        .alert.alert-success.alert-dismissible.fade.show(role="alert")
          ul.mb-0
            each msg in success
              li= msg
          button.btn-close(type="button", data-bs-dismiss="alert", aria-label="Close")
      if error && error.length
        .alert.alert-danger.alert-dismissible.fade.show(role="alert")
          ul.mb-0
            each msg in error
              li= msg
          button.btn-close(type="button", data-bs-dismiss="alert", aria-label="Close")
=======
    title Sistema HIS
    link(href="/css/style.css", rel="stylesheet")
    link(href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap", rel="stylesheet")
  
  body(class="bg-gray-100 font-inter min-h-screen flex flex-col")

    header(class="bg-gradient-to-r from-blue-800 to-blue-900 text-white p-4 shadow-lg")
      .container.mx-auto.flex.justify-between.items-center
        a(href="/", class="text-2xl font-bold tracking-tight hover:text-blue-200 transition-colors duration-200") Sistema HIS
        nav
          ul(class="flex space-x-6 items-center")
            li: a(href="/pacientes", class="hover:text-blue-200 transition-colors duration-200") Pacientes
            li: a(href="/admisiones", class="hover:text-blue-200 transition-colors duration-200") Admisiones
            li: a(href="/medicos", class="hover:text-blue-200 transition-colors duration-200") Médicos
            li: a(href="/turnos", class="hover:text-blue-200 transition-colors duration-200") Turnos
            li: a(href="/evaluaciones", class="hover:text-blue-200 transition-colors duration-200") Evaluaciones
            li: a(href="/altas", class="hover:text-blue-200 transition-colors duration-200") Altas

            if isAuthenticated && user && user.rol === 'admin'
              li(class="relative group")
                button(class="hover:text-blue-200 transition-colors duration-200 focus:outline-none py-2") Admin
                div(class="absolute hidden group-hover:block bg-blue-800 text-white py-2 rounded-md shadow-xl z-10 min-w-max left-1/2 transform -translate-x-1/2 top-full mt-2")
                  a(href="/alas", class="block px-4 py-2 hover:bg-blue-700 transition-colors duration-200") Gestión de Alas
                  a(href="/habitaciones", class="block px-4 py-2 hover:bg-blue-700 transition-colors duration-200") Gestión de Habitaciones
                  a(href="/camas", class="block px-4 py-2 hover:bg-blue-700 transition-colors duration-200") Gestión de Camas
                  a(href="/usuarios", class="block px-4 py-2 hover:bg-blue-700 transition-colors duration-200") Gestión de Usuarios

            if isAuthenticated && user
              li(class="flex items-center ml-4")
                span(class="text-sm mr-3 font-medium capitalize opacity-90") Hola, #{user.nombre_usuario || user.nombre || (user.email ? user.email.split('@')[0] : '')}
                a(href="/auth/logout", class="bg-red-600 hover:bg-red-700 transition-colors duration-200 text-white py-1 px-3 rounded-md text-sm font-semibold shadow-md") Cerrar Sesión
            else
              li
                a(href="/auth/login", class="bg-green-600 hover:bg-green-700 transition-colors duration-200 text-white py-1 px-3 rounded-md text-sm font-semibold shadow-md") Iniciar Sesión

    main(class="flex-grow p-6")
      .container.mx-auto
        script.
          if (Array.isArray(error) && error.length > 0) {
            document.write('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6 shadow-md" role="alert">');
            document.write('<strong class="font-bold">!Error:</strong>');
            document.write('<span class="block sm:inline">&nbsp;' + error + '</span>');
            document.write('</div>');
          }
          if (Array.isArray(success) && success.length > 0) {
            document.write('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative mb-6 shadow-md" role="alert">');
            document.write('<strong class="font-bold">¡Éxito!</strong>');
            document.write('<span class="block sm:inline">&nbsp;' + success + '</span>');
            document.write('</div>');
          }
>>>>>>> aa8027501b4c073def9c20a08ba1531f326b1aa0

      block content

<<<<<<< HEAD
    script(src="/js/bootstrap.bundle.min.js")
=======
    footer(class="bg-gray-800 text-white p-4 text-center mt-auto text-sm shadow-inner")
      .container.mx-auto
        p &copy; 2025 Sistema HIS - Programación Web II | Desarrollado con ❤ por Mile

    block scripts
>>>>>>> aa8027501b4c073def9c20a08ba1531f326b1aa0
