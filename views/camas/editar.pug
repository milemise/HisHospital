extends ../layout

block content
<<<<<<< HEAD
  .row.justify-content-center
    .col-md-7.col-lg-6
      .card.shadow-sm.my-5
        .card-header
          h1.h4.mb-0 Editar Cama ##{cama.numero} (Hab: #{cama.habitacion.numero})
        form(action="/camas/actualizar/" + cama.id_cama, method="POST")
          .card-body.p-4
            .mb-3
              label.form-label(for="id_habitacion") Habitación
              select.form-select#id_habitacion(name="id_habitacion", required)
                each h in habitaciones
                  option(value=h.id_habitacion, selected=(h.id_habitacion === cama.id_habitacion))= `Hab: ${h.numero} (Ala: ${h.ala.nombre}, Tipo: ${h.tipo})`
            .mb-3
              label.form-label(for="numero") Número de Cama
              input.form-control#numero(type="text", name="numero", value=cama.numero, required)
            .mb-3
              label.form-label(for="estado") Estado
              select.form-select#estado(name="estado", required)
                option(value="Libre", selected=(cama.estado === 'Libre')) Libre
                option(value="Ocupada", selected=(cama.estado === 'Ocupada')) Ocupada
                option(value="En Limpieza", selected=(cama.estado === 'En Limpieza')) En Limpieza
                option(value="Fuera de Servicio", selected=(cama.estado === 'Fuera de Servicio')) Fuera de Servicio
            #generoAsignadoField.mb-3
              label.form-label(for="genero_asignado") Género Asignado (solo para habitaciones compartidas)
              select.form-select#genero_asignado(name="genero_asignado")
                option(value="", selected=(!cama.genero_asignado)) Mixto / No Asignado
                option(value="M", selected=(cama.genero_asignado === 'M')) Masculino
                option(value="F", selected=(cama.genero_asignado === 'F')) Femenino
          .card-footer.text-end.bg-light
            a.btn.btn-secondary(href="/camas") Cancelar
            button.btn.btn-primary.ms-2(type="submit") Actualizar Cama
=======
  .max-w-md.mx-auto.bg-white.mt-10.p-8.rounded-2xl.shadow-xl
    h1.text-3xl.font-bold.text-blue-900.mb-6 Editar Cama ##{cama.numero} (Hab: #{cama.habitacion.numero})

    form(action=`/camas/actualizar/${cama.id_cama}`, method="POST", class="space-y-6")
      div
        label(for="id_habitacion", class="block text-sm font-medium text-gray-700") Habitación
        select(id="id_habitacion", name="id_habitacion", required, class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500")
          each h in habitaciones
            option(value=h.id_habitacion, selected=(h.id_habitacion === cama.id_habitacion))= `Hab: ${h.numero} (Ala: ${h.ala.nombre}, Tipo: ${h.tipo})`

      div
        label(for="numero", class="block text-sm font-medium text-gray-700") Número de Cama
        input(type="text", name="numero", id="numero", value=cama.numero, required, class="w-full mt-1 rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500")
      
      div
        label(for="estado", class="block text-sm font-medium text-gray-700") Estado
        select(name="estado", id="estado", required, class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500")
          option(value="Libre", selected=(cama.estado === 'Libre')) Libre
          option(value="Ocupada", selected=(cama.estado === 'Ocupada')) Ocupada
          option(value="En Limpieza", selected=(cama.estado === 'En Limpieza')) En Limpieza
          option(value="Fuera de Servicio", selected=(cama.estado === 'Fuera de Servicio')) Fuera de Servicio
      
      div#generoAsignadoField
        label(for="genero_asignado", class="block text-sm font-medium text-gray-700") Género Asignado (solo para habitaciones compartidas)
        select(name="genero_asignado", id="genero_asignado", class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500")
          option(value="", selected=(!cama.genero_asignado)) Mixto / No Asignado
          option(value="M", selected=(cama.genero_asignado === 'M')) Masculino
          option(value="F", selected=(cama.genero_asignado === 'F')) Femenino

      .flex.justify-end.space-x-4.pt-4
        a(href="/camas", class="bg-gray-600 hover:bg-gray-700 transition-colors duration-300 text-white font-semibold py-2 px-4 rounded-md shadow-md") Cancelar
        button(type="submit", class="bg-blue-600 hover:bg-blue-700 transition-colors duration-300 text-white font-semibold py-2 px-6 rounded-md shadow-md") Actualizar Cama
>>>>>>> aa8027501b4c073def9c20a08ba1531f326b1aa0

block scripts
  script.
    const habitacionSelect = document.getElementById('id_habitacion');
    const generoAsignadoField = document.getElementById('generoAsignadoField');
    const generoAsignadoSelect = generoAsignadoField.querySelector('select[name="genero_asignado"]');
    const habitacionesData = !{JSON.stringify(habitaciones)};

    function toggleGeneroAsignado() {
      const selectedHabitacionId = habitacionSelect.value;
      const selectedHabitacion = habitacionesData.find(h => h.id_habitacion == selectedHabitacionId);

      if (selectedHabitacion && selectedHabitacion.tipo === 'Compartida') {
        generoAsignadoField.style.display = 'block';
      } else {
        generoAsignadoField.style.display = 'none';
        generoAsignadoSelect.value = '';
      }
    }

    habitacionSelect.addEventListener('change', toggleGeneroAsignado);
    document.addEventListener('DOMContentLoaded', toggleGeneroAsignado);