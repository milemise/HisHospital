extends ../layout

block content
<<<<<<< HEAD
  .card.shadow-sm.my-4
    .card-header.py-3
      h1.h4.mb-0 Historial de Evaluaciones Médicas
    .card-body
      if evaluaciones.length === 0
        .alert.alert-info.mb-0 No hay evaluaciones registradas en el sistema.
      else
        .table-responsive
          table.table.table-striped.table-hover.align-middle
            thead.table-light
              tr
                th ID Eval
                th Paciente
                th Admisión
                th Fecha
                th Médico
                th Diagnóstico
                th Signos Vitales
                th.text-center Acciones
            tbody
              each eval in evaluaciones
                tr
                  td #{eval.id_evaluacion}
                  td #{eval.admision.paciente ? eval.admision.paciente.nombre + ' ' + eval.admision.paciente.apellido : 'N/A'}
                  td
                    a(href="/admisiones/detalles/" + eval.id_admision) Admisión ##{eval.id_admision}
                  td #{eval.fecha_evaluacion ? new Date(eval.fecha_evaluacion).toLocaleDateString('es-ES') : 'N/A'}
                  td #{eval.medico ? eval.medico.nombre + ' ' + eval.medico.apellido : 'N/A'}
                  td #{eval.diagnostico || 'N/A'}
                  td
                    if eval.signos_vitales
                      ul.list-unstyled.mb-0.small
                        if eval.signos_vitales.presion_arterial
                          li PA: #{eval.signos_vitales.presion_arterial}
                        if eval.signos_vitales.frecuencia_cardiaca
                          li FC: #{eval.signos_vitales.frecuencia_cardiaca}
                        if eval.signos_vitales.frecuencia_respiratoria
                          li FR: #{eval.signos_vitales.frecuencia_respiratoria}
                        if eval.signos_vitales.temperatura
                          li Temp: #{eval.signos_vitales.temperatura}°C
                    else
                      span.text-muted N/A
                  td.text-center
                    .d-inline-flex.gap-2
                      a.btn.btn-sm.btn-outline-primary(href="/evaluaciones/editar/" + eval.id_evaluacion) Editar
                      form(action="/evaluaciones/eliminar/" + eval.id_evaluacion, method="POST", onsubmit="return confirm('¿Está seguro de eliminar esta evaluación?');")
                        button.btn.btn-sm.btn-outline-danger(type="submit") Eliminar
=======
  .max-w-7xl.mx-auto.bg-white.p-8.rounded-2xl.shadow-xl
    .flex.justify-between.items-center.mb-6
      h1.text-3xl.font-bold.text-blue-900 Historial de Evaluaciones Médicas

    if !evaluaciones || evaluaciones.length === 0
      p.text-gray-600.mt-4 No hay evaluaciones registradas en el sistema.
    else
      .overflow-x-auto.mt-6
        table.min-w-full.bg-white.border.border-gray-200.rounded-lg.shadow-sm
          thead.bg-blue-100.text-gray-700.uppercase.text-sm
            tr
              th.py-3.px-4.text-left.font-semibold ID Eval
              th.py-3.px-4.text-left.font-semibold Paciente
              th.py-3.px-4.text-left.font-semibold Admisión
              th.py-3.px-4.text-left.font-semibold Fecha
              th.py-3.px-4.text-left.font-semibold Médico
              th.py-3.px-4.text-left.font-semibold Diagnóstico
              th.py-3.px-4.text-left.font-semibold Signos Vitales
              th.py-3.px-4.text-center.font-semibold Acciones
          tbody.divide-y.divide-gray-200
            each eval in evaluaciones
              tr(class="hover:bg-gray-50 transition-colors duration-100")
                td.py-3.px-4.whitespace-nowrap.text-sm.text-gray-800 #{eval.id_evaluacion}
                td.py-3.px-4.whitespace-nowrap.text-sm.font-medium.text-gray-900 #{eval.admision?.paciente ? eval.admision.paciente.nombre + ' ' + eval.admision.paciente.apellido : 'N/A'}
                td.py-3.px-4.whitespace-nowrap.text-sm.text-gray-700
                  a(href=`/admisiones/detalles/${eval.id_admision}`, class="text-blue-600 hover:underline") Admisión ##{eval.id_admision}
                td.py-3.px-4.whitespace-nowrap.text-sm.text-gray-700 #{eval.fecha_evaluacion ? new Date(eval.fecha_evaluacion).toLocaleDateString('es-ES') : 'N/A'}
                td.py-3.px-4.whitespace-nowrap.text-sm.text-gray-700 #{eval.medico ? eval.medico.nombre + ' ' + eval.medico.apellido : 'N/A'}
                td.py-3.px-4.text-sm.text-gray-700 #{eval.diagnostico || 'N/A'}
                td.py-3.px-4.text-sm.text-gray-700
                  if eval.signos_vitales
                    ul.list-disc.list-inside.text-xs
                      if eval.signos_vitales.presion_arterial
                        li PA: #{eval.signos_vitales.presion_arterial}
                      if eval.signos_vitales.frecuencia_cardiaca
                        li FC: #{eval.signos_vitales.frecuencia_cardiaca}
                      if eval.signos_vitales.frecuencia_respiratoria
                        li FR: #{eval.signos_vitales.frecuencia_respiratoria}
                      if eval.signos_vitales.temperatura
                        li Temp: #{eval.signos_vitales.temperatura}°C
                  else
                    | N/A
                td.py-3.px-4.whitespace-nowrap.text-sm.flex.space-x-2.justify-center
                  a(href=`/evaluaciones/editar/${eval.id_evaluacion}`, class="text-indigo-600 hover:text-indigo-800 font-medium transition-colors") Editar
                  form(action=`/evaluaciones/eliminar/${eval.id_evaluacion}`, method="POST", onsubmit="return confirm('¿Está seguro de eliminar esta evaluación?');", style="display:inline-block;")
                    button(type="submit", class="text-red-600 hover:text-red-800 font-medium transition-colors") Eliminar
>>>>>>> aa8027501b4c073def9c20a08ba1531f326b1aa0
